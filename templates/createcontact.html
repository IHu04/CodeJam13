<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <title>create contact</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <style>
    body {
        min-height: 100vh;
        background: #f6dcc2;
        display: flex;
        flex-direction: column; 
        align-items: center;
        justify-content: flex-start;
        font-family: "Haas Grot Text R Web", "Helvetica Neue", Helvetica, Arial, sans-serif;
        margin: 20px 20px;
        cursor: url('https://cdn.discordapp.com/attachments/1175292590569038017/1175753044688908308/Untitled_Artwork_2.png?ex=656c605a&is=6559eb5a&hm=783a21942d6f9c31145b42341b4970f04269e24d78b053d3d9cf9125f44c5921&'), auto;
    }
    
    a {
        text-decoration: none; 
        color: inherit;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        width: 100%;
    }

    .header {
        display: flex;
        align-items: center;
        background: #f6dcc2;
    }
    
    .header img {
        height: 45px;
        margin-right: 10px;
    }
    .website-name {
      font-size: 35px;
      font-weight: bold;
      color: #902b29;
    }
    .container {
      margin-top: 50px;
      width: 25%;
      background: #fff;
      border-radius: 8px;
      padding: 40px 70px 20px 40px;
      box-shadow: 0 2px 4px rgba(99, 72, 69, 0.2);
    }
    .title {
      font-size: 2vw;
      font-weight: 600;
      color: rgb(216, 144, 105);
    }
    .colored-text {
      color: #902b29;
    }

   
@media screen and (max-width: 768px) {
    .title {
        font-size: 20px; 
    }
}


@media screen and (max-width: 480px) {
    .title {
        font-size: 20px;
    }
}


  
    .input-box {
      height: 50px;
      width: 100%;
      margin-top: 20px;
      font-family: "Haas Grot Text R Web", "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-size: 20px;
        font-weight: bold;
        color:#902b29;
        margin-top: 20px;
        margin-bottom: 60px;
    }

   
    .input-box input,
    .input-box textarea {
    margin-top: 10px;
      height: 100%;
      width: 100%;
      border: none;
      outline: none;
      font-size: 16px;
      background: #f7f3ef;
      border-radius: 6px;
      padding: 0 15px;
      resize: none;
    }

    .submit-button-container{
        display: flex;
        justify-content: center;
    }
    
    input[type="submit"] {
        height: 40px;
        width: 80px;
        align-items: center;
        justify-content: center;
        background-color: #902b29; 
        color:#f7f3ef;
        border: none; 
        padding: 6px 10px; 
        border-radius: 5px; 
        font-size: 16px; 
        font-family: "Haas Grot Text R Web", "Helvetica Neue", Helvetica, Arial, sans-serif;;
        font-weight: bold;
        cursor: url('https://cdn.discordapp.com/attachments/1175292590569038017/1175753044688908308/Untitled_Artwork_2.png?ex=656c605a&is=6559eb5a&hm=783a21942d6f9c31145b42341b4970f04269e24d78b053d3d9cf9125f44c5921&'), auto;
        transition: background-color 0.5s; 
        margin: 20px 10px;
    }

    input[type="submit"]:hover {
        background-color: #611c1b; 
        cursor: url('https://cdn.discordapp.com/attachments/1175292590569038017/1175753044688908308/Untitled_Artwork_2.png?ex=656c605a&is=6559eb5a&hm=783a21942d6f9c31145b42341b4970f04269e24d78b053d3d9cf9125f44c5921&'), auto;
    }

    
  
    .contact-box{
        font-family: "Haas Grot Text R Web", "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-size: 20px;
        font-weight: bold;
        color:#902b29;
        margin-top: 20px;
        cursor: url('https://cdn.discordapp.com/attachments/1175292590569038017/1175753044688908308/Untitled_Artwork_2.png?ex=656c605a&is=6559eb5a&hm=783a21942d6f9c31145b42341b4970f04269e24d78b053d3d9cf9125f44c5921&'), auto;
    }
   
    .contact-box select{
        border-radius: 5px;
        border:none;
        background-color: #f7f3ef;
        font-size: 16px;
        padding: 10px 10px;
        margin-top: 10px;
        justify-content: center;
        height: 50px;
        cursor: url('https://cdn.discordapp.com/attachments/1175292590569038017/1175753044688908308/Untitled_Artwork_2.png?ex=656c605a&is=6559eb5a&hm=783a21942d6f9c31145b42341b4970f04269e24d78b053d3d9cf9125f44c5921&'), auto;
    }

    button {
    background-color: #902b29;
    color: #f7f3ef;
    border: none;
    padding: 10px 15px;
    border-radius: 5px;
    font-size: 16px;
    font-weight: bold;
    transition: background-color 0.3s;
    cursor: url('https://cdn.discordapp.com/attachments/1175292590569038017/1175753044688908308/Untitled_Artwork_2.png?ex=656c605a&is=6559eb5a&hm=783a21942d6f9c31145b42341b4970f04269e24d78b053d3d9cf9125f44c5921&'), auto;
    }

    button:hover {
    background-color: #611c1b;
    }

    
    .detail-box {
        font-family: "Haas Grot Text R Web", "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-size: 20px;
        font-weight: bold;
        color:#902b29;
        margin-top: 30px;
    }

    
    .detail-box select{
        border-radius: 5px;
        border:none;
        background-color: #f7f3ef;
        font-size: 16px;
        padding: 10px 10px;
        margin-top: 10px;
        justify-content: center;
        height: 40px;
        margin-bottom: 15px;
        margin-right: 20px;
    }

 
    .dynamic-input {
    height: 50px;
    width: 100%;
    border: none;
    outline: none;
    font-size: 16px;
    background: #f7f3ef;
    border-radius: 6px;
    padding: 0 15px;
    margin-top: 5px;
    margin-left: 0px;
    margin-bottom: 13px;
}

.reminders{
        font-family: "Haas Grot Text R Web", "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-size: 20px;
        font-weight: bold;
        color:#902b29;
        margin-top: 20px;
    }
    
    /* personal or professional drop down */
    .reminders select{
        border-radius: 5px;
        border:none;
        background-color: #f7f3ef;
        font-size: 16px;
        padding: 10px 10px;
        margin-top: 15px;
        justify-content: center;
        height: 40px;
        margin-bottom: 15px;
        margin-right: 20px;
    }

    .reminders input{
      height: 100%;
      width: 20%;
      border: none;
      outline: none;
      font-size: 16px;
      background: #f7f3ef;
      border-radius: 6px;
      padding: 10px 10px;
      resize: none;
      color:black;

    }

    h2{
        color: rgb(216, 144, 105);
    }

  </style>
    <body>
        <a href="user-dashboard.html">
            <div class="header">
                <img src="https://cdn.discordapp.com/attachments/1175292590569038017/1175515806122123427/Untitled_Artwork_7.png?ex=656b8368&is=65590e68&hm=ab22f752e66063dbeecbcf3c30106b1738c70b7f9f2a2c172bd5d6c12bea70c2&" alt="Logo"> <!-- Update with your logo path -->
                <span class="website-name">chocolate chip</span>
            </div>
        </a>

        <div class="container">
            <div class="title">create a new <span class="colored-text">contact</span></div>
            <form id="contactForm">
                <div class="input-box">
                    <label for="name">name</label><br>
                    <input id="contact name" type="text" placeholder="enter contact name">
                </div>
        
                <div class="contact-box">
                    <label for="contact">type of contact</label><br>
                    <select name="type" id="type" required>
                        <option value="personal">personal</option>
                        <option value="professional">professional</option>
                    </select>
                </div>
    
                <div class="detail-box">
                    <label for="addDetailCaption">add details (optional)</label><br>
                    
                    <select id="detailDropdown">
                        <option value="option1">phone number</option>
                        <option value="option2">email</option>
                        <option value="option3">social media</option>
                        <option value="option2">other</option>
                    </select>
            
                    <button id="addDetailButton">add new detail</button>
                    <div id="inputContainerDetail" required></div>

                    <div id="messageBox"></div>
                </div>

                <h2>create reminders</h2>
                <div class="reminders">
                    
                    <label for="starting-day"><i>enter starting day:</i></label><br>
                    <label for="dayInput">day:</label>
                    <input type="number" id="dayInput" name="day" min="1" max="31" placeholder="day" required>
                    <br>
                    <label for="monthDropdown">month:</label>
                    <select id="monthDropdown" name="month" required>
                        <option value="">select month</option>
                        <option value="1">january</option>
                        <option value="2">february</option>
                        <option value="3">march</option>
                        <option value="4">april</option>
                        <option value="5">may</option>
                        <option value="6">june</option>
                        <option value="7">july</option>
                        <option value="8">august</option>
                        <option value="9">september</option>
                        <option value="10">october</option>
                        <option value="11">november</option>
                        <option value="12">december</option>
                    </select>
                    <br>
                    <label for="yearInput">year:</label>
                    <input type="number" id="yearInput" name="year" min="2023" max="2100" placeholder="year" required>

                    <br><br>
                    <label for="freq"><i>enter frequency:</i></label><br>
                    <label for="freqnum">i want to be reminded to connect every</label>
                    <input type="number" id="dayInput2" name="day" min="1" max="50000" placeholder="..." required>
                    <label for="freqnum2">days.</label>
                    <br>
                </div>

                <div class="submit-button-container">
                    <input type="submit" value="submit">
                </div>
            </form>
        </div>
        <script>
    var addedDetails = {
            'phone number': false,
            'email': false,
            'social media': false,
            'other': false
        };

    let responseDict = {};
    var addButton = document.getElementById('addDetailButton');
    var inputContainer = document.getElementById('inputContainerDetail');
    var detailDropdown = document.getElementById('detailDropdown');
    var messageBox = document.getElementById('messageBox'); // Add an element to show messages
    //
    var contactForm = document.getElementById('contactForm')
    const nameInput = document.getElementById("contact name");
    const typeInput = document.getElementById("type");
    
    contactForm.addEventListener('submit', function(event) {
        event.preventDefault()
        
        responseDict["name"] = nameInput.value
        responseDict["type"] = typeInput.value
        const inputs = document.querySelectorAll("#inputContainerDetail input");
            
        inputs.forEach(input => {
                
            info = input.id
            responseDict[info] = input.value; // Store user-input value
        });
            
        // Send data to server using fetch API
        fetch('/addChip', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ data: responseDict }),
        })
        .then(response => {
            if (response.ok) {
                window.location.href = '/chipviewer';
            } else {
                // Handle error
                console.error('Error sending data');
            }
        })
        .catch(error => {
            console.error('Error:', error);
        });
    })
    //
    addButton.onclick = function(event) {
        event.preventDefault();
        var selectedOption = detailDropdown.options[detailDropdown.selectedIndex].text;

        // Check if the detail has already been added
        if (!addedDetails[selectedOption]) {
            addedDetails[selectedOption] = true;

            // Create a new input element with the same style as .input-box input
            var newInput = document.createElement('input');
            newInput.id = selectedOption;
            newInput.className = 'dynamic-input'; // Apply the same styles
            newInput.type = 'text';
            newInput.placeholder = 'enter ' + selectedOption;
            
            inputContainer.appendChild(newInput);
        } else {
            alert("Please create only one detail for each type of element."); // Or update message in the messageBox
        }
    };
</script>
        </script>
    </body>
</html>
